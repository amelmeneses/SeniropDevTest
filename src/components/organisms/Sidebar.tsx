import React from 'react';
import { LayoutDashboard, Users, FileText, BarChart, Settings, X, type LucideIcon } from 'lucide-react';
import { cn } from '../../utils/utils';

interface SidebarItemProps {
    icon: LucideIcon;
    label: string;
    active?: boolean;
}

// Individual navigation link with icon; highlights when active.
const SidebarItem: React.FC<SidebarItemProps> = ({ icon: Icon, label, active }) => {
    return (
        <div
            className={cn(
                "flex items-center space-x-3 px-6 py-3.5 font-roboto transition-colors cursor-pointer",
                active ? "text-white text-base font-bold" : "text-white text-base font-normal hover:bg-sidebar-hover"
            )}
        >
            <Icon className="h-5 w-5" />
            <span>{label}</span>
        </div>
    );
};

interface SidebarProps {
    isOpen: boolean;
    onClose: () => void;
}

// Fixed vertical sidebar with logo, navigation items, and a logout button.
// On mobile: slides in as an overlay. On desktop: always visible.
export const Sidebar: React.FC<SidebarProps> = ({ isOpen, onClose }) => {
    return (
        <>
            {/* Backdrop — mobile only */}
            {isOpen && (
                <div
                    className="fixed inset-0 z-30 bg-black/40 md:hidden"
                    onClick={onClose}
                    aria-hidden="true"
                />
            )}

            <div className={cn(
                "fixed inset-y-0 left-0 z-40 flex flex-col h-full w-[250px] bg-sidebar text-white transition-transform duration-300 ease-in-out",
                "md:relative md:translate-x-0",
                isOpen ? "translate-x-0" : "-translate-x-full"
            )}>
                {/* Close button — mobile only */}
                <button
                    className="md:hidden absolute top-4 right-4 text-white/70 hover:text-white"
                    onClick={onClose}
                    aria-label="Close menu"
                >
                    <X className="h-5 w-5" />
                </button>

                {/* Logo — Senirop SVG from Figma assets */}
                <div className="px-[45px] pt-[38px]">
                    <svg width="148" height="39" viewBox="0 0 148 39" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M21.3391 24.3176C21.1099 22.4824 20.6514 20.8765 19.2761 19.2706L6.8976 2.98235C6.8976 2.98235 6.8976 2.75294 6.8976 2.52353C6.8976 2.29411 7.12683 2.29412 7.12683 2.29412H7.58529V0H2.54221C1.62528 0 0.708362 0.458819 0.249901 1.37647C-0.208561 2.29411 0.0206696 3.21176 0.479131 4.12941L12.8576 20.4176C13.7745 21.5647 14.233 22.9412 14.4622 24.3176C14.4622 25.6941 14.233 27.0706 13.7745 28.2176C13.3161 29.3647 12.3991 30.5118 11.253 31.2C10.1068 31.8882 8.96068 32.3471 7.35606 32.3471H6.8976V34.6412H11.9407C14.0038 34.6412 15.6084 34.1824 16.9838 33.0353C18.3591 31.8882 19.5053 30.7412 20.193 29.1353C21.1099 27.7588 21.3391 26.1529 21.3391 24.3176ZM18.3591 28.4471C17.9007 29.5941 16.9838 30.7412 15.8376 31.4294C15.1499 31.8882 14.4622 32.3471 13.5453 32.3471C14.4622 31.4294 15.3791 30.2824 15.8376 29.1353C16.5253 27.5294 16.7545 25.9235 16.7545 24.0882C16.5253 22.2529 16.0668 20.6471 14.6914 19.0412L2.31298 2.75294C2.31298 2.75294 2.31298 2.52353 2.31298 2.29412C2.31298 2.06471 2.54221 2.06471 2.54221 2.06471H4.60529C4.60529 2.75294 4.60529 3.44118 5.06375 3.9L17.4422 20.1882C18.3591 21.3353 18.8176 22.7118 19.0468 24.0882C19.0468 25.9235 18.8176 27.3 18.3591 28.4471Z" fill="white"/>
                        <path d="M25.9237 24.3176C25.6945 22.4824 25.236 20.8765 23.8606 19.2706L11.4822 2.98235C11.4822 2.98235 11.4822 2.75294 11.4822 2.52353C11.4822 2.29411 11.7114 2.29412 11.7114 2.29412H12.1699V0H7.35606C6.43914 0 5.52221 0.458819 5.06375 1.37647C4.60529 2.29411 4.83452 3.21176 5.29298 4.12941L17.6714 20.4176C18.5884 21.5647 19.0468 22.9412 19.2761 24.3176C19.2761 25.6941 19.0468 27.0706 18.5884 28.2176C18.1299 29.3647 17.213 30.5118 16.0668 31.2C14.9207 31.8882 13.7745 32.3471 12.1699 32.3471H11.7114V34.6412H16.7545C18.8176 34.6412 20.4222 34.1824 21.7976 33.0353C23.1729 31.8882 24.3191 30.7412 25.0068 29.1353C25.6945 27.7588 26.1529 26.1529 25.9237 24.3176ZM23.1729 28.4471C22.7145 29.5941 21.7976 30.7412 20.6514 31.4294C19.9638 31.8882 19.2761 32.3471 18.3591 32.3471C19.2761 31.4294 20.193 30.2824 20.6514 29.1353C21.3391 27.5294 21.5684 25.9235 21.5684 24.0882C21.3391 22.2529 20.8807 20.6471 19.5053 19.0412L7.12683 2.75294C7.12683 2.75294 7.12683 2.52353 7.12683 2.29412C7.12683 2.06471 7.35606 2.06471 7.35606 2.06471H9.41914C9.41914 2.75294 9.41914 3.44118 9.8776 3.9L22.2561 20.1882C23.1729 21.3353 23.6314 22.7118 23.8606 24.0882C23.8606 25.9235 23.6314 27.3 23.1729 28.4471Z" fill="white"/>
                        <path d="M30.5083 24.3176C30.2791 22.4824 29.8206 20.8765 28.4452 19.2706L16.0668 2.98235C16.0668 2.98235 16.0668 2.75294 16.0668 2.52353C16.0668 2.29411 16.2961 2.29412 16.2961 2.29412H23.4022V0.229408H12.1699C11.253 0.229408 10.3361 0.688231 9.8776 1.37647C9.18991 2.29411 9.41914 3.44118 9.8776 4.35882L22.2561 20.6471C23.1729 21.7941 23.6314 23.1706 23.8606 24.5471C23.8606 25.9235 23.6314 27.3 23.1729 28.4471C22.7145 29.5941 21.7976 30.7412 20.6514 31.4294C19.5053 32.1176 18.3591 32.5765 16.7545 32.5765H16.2961V34.6412H21.3391C23.4022 34.6412 25.0068 34.1824 26.3822 33.0353C27.7576 31.8882 28.9037 30.7412 29.5914 29.1353C30.5083 27.7588 30.7376 26.1529 30.5083 24.3176ZM27.7576 28.4471C27.2991 29.5941 26.3822 30.7412 25.236 31.4294C24.5483 31.8882 23.8606 32.3471 22.9437 32.3471C23.8606 31.4294 24.7776 30.2824 25.236 29.1353C25.9237 27.5294 26.1529 25.9235 26.1529 24.0882C25.9237 22.2529 25.4652 20.6471 24.0899 19.0412L11.7114 2.75294C11.7114 2.75294 11.7114 2.52353 11.7114 2.29412C11.7114 2.06471 11.9407 2.06471 11.9407 2.06471H14.0038C14.0038 2.75294 14.0038 3.44118 14.4622 3.9L26.8406 20.1882C27.7576 21.3353 28.216 22.7118 28.4452 24.0882C28.4452 25.9235 28.216 27.3 27.7576 28.4471Z" fill="white"/>
                        <path d="M29.5914 2.29412C30.2245 2.29412 30.7376 1.78056 30.7376 1.14706C30.7376 0.513557 30.2245 0 29.5914 0C28.9585 0 28.4452 0.513557 28.4452 1.14706C28.4452 1.78056 28.9585 2.29412 29.5914 2.29412Z" fill="white"/>
                        <path d="M1.16682 34.8706C1.79983 34.8706 2.31298 34.3569 2.31298 33.7235C2.31298 33.0901 1.79983 32.5765 1.16682 32.5765C0.533821 32.5765 0.0206697 33.0901 0.0206697 33.7235C0.0206697 34.3569 0.533821 34.8706 1.16682 34.8706Z" fill="white"/>
                        <path d="M37.6145 31.8882L38.5314 30.5118C40.136 31.6588 41.7406 32.3471 44.2622 32.3471C46.5545 32.3471 47.4714 31.4294 47.4714 30.2824C47.4714 29.3647 47.0129 28.6765 43.3452 27.7588C39.9068 27.0706 38.3022 25.9235 38.3022 23.8588C38.3022 21.7941 40.136 20.1882 43.8037 20.1882C45.8668 20.1882 47.7006 20.8765 49.076 21.7941L47.9299 23.1706C46.7837 22.2529 45.1791 21.7941 43.5745 21.7941C41.2822 21.7941 40.5945 22.7118 40.5945 23.6294C40.5945 24.7765 41.7406 25.2353 44.4914 25.9235C48.8468 26.8412 49.9929 27.9882 49.9929 30.0529C49.9929 32.1176 47.9299 33.9529 44.2622 33.9529C41.5114 33.9529 39.2191 33.0353 37.6145 31.8882Z" fill="white"/>
                        <path d="M53.6606 27.0706C53.6606 22.7118 56.8699 20.1882 60.3083 20.1882C63.976 20.1882 66.2683 22.7118 66.2683 26.3824C66.2683 26.8412 66.2683 27.3 66.2683 27.7588H55.2652V25.9235H65.1222L64.6637 26.6118C64.6637 23.4 63.0591 22.0235 60.7668 22.0235C58.2453 22.0235 56.1822 23.8588 56.1822 27.0706C56.1822 30.5118 58.4745 32.1176 61.2252 32.1176C62.8299 32.1176 63.976 31.6588 65.1222 30.9706L66.0391 32.3471C64.6637 33.2647 63.0591 33.9529 60.996 33.9529C56.8699 33.9529 53.6606 31.4294 53.6606 27.0706Z" fill="white"/>
                        <path d="M70.6237 20.8765H72.4576L72.6868 23.1706C74.0622 21.7941 75.6668 20.6471 77.7299 20.6471C80.9391 20.6471 82.3145 22.4824 82.3145 25.9235V33.9529H80.0222V26.1529C80.0222 23.6294 79.1053 22.4824 77.0422 22.4824C75.4376 22.4824 74.5206 23.1706 72.916 24.7765V33.9529H70.6237V20.8765Z" fill="white"/>
                        <path d="M92.6299 22.7118H86.6699V20.8765H94.9222V33.9529H92.6299V22.7118ZM91.9422 16.2882C91.9422 15.3706 92.6299 14.4529 93.776 14.4529C94.6929 14.4529 95.6099 15.1412 95.6099 16.2882C95.6099 17.4353 94.9222 18.1235 93.776 18.1235C92.6299 18.1235 91.9422 17.4353 91.9422 16.2882Z" fill="white"/>
                        <path d="M106.154 20.8765L106.384 24.0882C107.759 22.0235 109.822 20.6471 112.344 20.6471C113.261 20.6471 114.178 20.8765 114.865 21.1059L114.407 22.9412C113.49 22.7118 113.031 22.4824 111.885 22.4824C109.822 22.4824 107.988 23.4 106.384 26.1529V33.7235H104.091V20.8765H106.154Z" fill="white"/>
                        <path d="M118.304 27.0706C118.304 22.7118 121.284 20.1882 124.722 20.1882C128.161 20.1882 131.141 22.7118 131.141 27.0706C131.141 31.4294 128.161 33.9529 124.722 33.9529C121.284 33.9529 118.304 31.4294 118.304 27.0706ZM128.848 27.0706C128.848 24.0882 127.244 22.0235 124.722 22.0235C122.201 22.0235 120.596 24.0882 120.596 27.0706C120.596 30.0529 122.201 32.1176 124.722 32.1176C127.244 32.1176 128.848 30.0529 128.848 27.0706Z" fill="white"/>
                        <path d="M135.267 20.4176H137.101L137.33 22.0235C138.476 20.8765 140.31 19.9588 141.914 19.9588C145.353 19.9588 147.416 22.4824 147.416 26.6118C147.416 30.9706 144.665 33.7235 141.456 33.7235C140.31 33.7235 138.705 33.0353 137.559 32.1176V39H135.267V20.4176ZM145.124 26.8412C145.124 23.8588 143.978 22.0235 141.456 22.0235C140.31 22.0235 138.934 22.7118 137.559 23.8588V30.2824C138.705 31.4294 140.081 31.8882 140.998 31.8882C143.29 32.1176 145.124 30.0529 145.124 26.8412Z" fill="white"/>
                    </svg>
                </div>

                {/* Navigation */}
                <nav className="flex-1 mt-[67px]">
                    <SidebarItem icon={LayoutDashboard} label="Dashboard" active />
                    <SidebarItem icon={Users} label="User management" />
                    <SidebarItem icon={FileText} label="Documents" />
                    <SidebarItem icon={BarChart} label="Statistics" />
                    <SidebarItem icon={Settings} label="Settings" />
                </nav>

                {/* Logout */}
                <div>
                    <button className="flex items-center justify-center w-full h-[60px] bg-[#15012E] hover:bg-[#1f0545] text-white text-sm font-medium transition-colors">
                        Logout
                    </button>
                </div>
            </div>
        </>
    );
};
